{% extends 'inventory/base.html' %}
{% load staticfiles %}

{% block title %}User{% endblock %}

{% block styles %}
    <style>
        body {
            background: #F7F7F9;
        }
    .long-card {
        padding: 10px !important;
        padding-bottom: 1px !important;
    }
    </style>
{% endblock %}

{% block body_block %}

    <div class="section"></div>
    <div class="section"></div>

    <div class="row">
        <div class="col s12 m4">
            <div class="card small">
                <div class="card-image">
                    <img src="{% static 'inventory/img/material.png' %}">
                    <span class="card-title"><i class="fa fa-user"></i> {{ username }}</span>
                </div>
                <div class="card-content">

                    <div class="row">

                        <div class="col s3 center-align">
                            <i class="material-icons">access_time</i> {{ current }}
                        </div>
                        <div class="col s3 center-align">
                            <i class="material-icons">history</i> {{ history_count }}
                        </div>
                        <div class="col s3 center-align">
                            <i class="material-icons">done_all</i> {{ total }}
                        </div>
                        <div class="col s3 center-align">
{#                            <i class="material-icons">history</i> 18#}
                            <i class="activator material-icons" style="cursor: pointer">more_vert</i></span>
                        </div>

                    </div>

                </div>
                <div class="card-action">
                  <a href="#">This is a link</a>
                </div>
                <div class="card-reveal">
                  <span class="card-title grey-text text-darken-4">Card Title<i class="material-icons right">close</i></span>
                  <p>Here is some more information about this product that is only revealed once clicked on.</p>
                </div>
            </div>
        </div>

        <div class="col s12 m8">

            {% if borrowed_items %}

                {# item = ItemBorrowed object #}
                {% for borrowed in borrowed_items %}
                    <div class="card">
                        <div class="card-content long-card">

                            <div class="row">
                                <div class="col s6 m6">
                                    {# Sorry for this shit. #} {# ItemBorrowed -> IndividualItem -> Item #}
                                    <p><strong>{{ borrowed.item.item.item_name }}</strong></p>
                                    <p class="grey-text">{{ borrowed.date_borrowed }}</p>
                                </div>

                                <div class="col s6 m6">
                                    <p class="grey-text">Item id: {{ borrowed.item.id }}</p>
                                    <p class="grey-text">Owner: {{ borrowed.item.item.item_owner.owner_name }}</p>
                                </div>
                            </div>

                        </div>
                    </div>
                {% endfor %}

                <hr>
{#                <h5 class="center-align">History</h5>#}

                {# item = ItemBorrowed object #}
                {% for history_item in history %}
                    <div class="card">
                        <div class="card-content long-card">

                            <div class="row">
                                <div class="col s6 m6">
                                    {# Sorry for this shit. #} {# ItemBorrowed -> IndividualItem -> Item #}
                                    <p><strong>{{ history_item.item.item.item_name }}</strong></p>
                                    <p class="grey-text">Returned: {{ history_item.date_returned }}</p>
                                </div>

                                <div class="col s6 m6">
                                    <p class="grey-text">Item id: {{ history_item.item.id }}</p>
                                    <p class="grey-text">Owner: {{ history_item.item.item.item_owner.owner_name }}</p>
                                </div>
                            </div>

                        </div>
                    </div>
                {% endfor %}

            {% else %}

                <h1>Todavia no has prestado ningun item! :(</h1>
                <a href="{% url 'inventory:index' %}">Ir a CSInventario</a>

    {% endif %}

        </div>

    </div>

    <div class="section"></div>

{% endblock %}